# .env - Updated for Vector Embeddings with Redis

# ============================================
# DATABASE CONFIGURATION
# ============================================
DB_HOST=localhost
DB_PORT=5432
DB_DATABASE=global_gate
DB_USER=postgres

DB_MIN_POOL_SIZE=5
DB_MAX_POOL_SIZE=20
DB_COMMAND_TIMEOUT=60
DB_SSL=false
DB_ECHO=false

# ============================================
# AI & EMBEDDINGS
# ============================================
OPENAI_API_KEY=your_openai_api_key_here
DB_PASSWORD=your_db_password_here

# Embedding settings
EMBEDDING_MODEL=text-embedding-ada-002
EMBEDDING_DIMENSION=384
EMBEDDING_BATCH_SIZE=100

# ============================================
# REDIS CACHING (NEW)
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_URL=redis://localhost:6379

# Cache settings
EMBEDDING_CACHE_TTL=3600        # 1 hour in seconds
MAX_MEMORY_CACHE_SIZE=1000      # Max items in fallback memory cache
CONVERSATION_CACHE_TTL=1800     # 30 minutes for chat sessions

# ============================================
# API PERFORMANCE & LIMITS (NEW)
# ============================================
# Rate limiting
API_RATE_LIMIT_PER_MINUTE=60    # Max requests per minute per IP
EMBEDDING_RATE_LIMIT=30         # Max embedding requests per minute

# Cost control
DAILY_OPENAI_BUDGET_USD=10.00   # Daily spending limit
MONTHLY_OPENAI_BUDGET_USD=100.00

# Performance
MAX_CONCURRENT_EMBEDDINGS=5     # Concurrent OpenAI API calls
REQUEST_TIMEOUT_SECONDS=30      # API request timeout

# ============================================
# RAG SEARCH SETTINGS (NEW)
# ============================================
DEFAULT_SIMILARITY_THRESHOLD=0.7    # Minimum similarity for search results
MAX_SEARCH_RESULTS=10               # Maximum results per search
MIN_SEARCH_RESULTS=3                # Minimum results to return

# Context window for RAG
MAX_CONTEXT_LENGTH=4000             # Max context tokens for GPT
MAX_CONTEXT_DOCUMENTS=5             # Max documents in context

# ============================================
# LOGGING & MONITORING (NEW)
# ============================================
LOG_LEVEL=INFO                      # DEBUG, INFO, WARNING, ERROR
STRUCTURED_LOGS=true                # Enable JSON structured logging
LOG_COSTS=true                      # Log API costs and usage

# Monitoring
ENABLE_METRICS=true                 # Enable Prometheus metrics
METRICS_PORT=9090

# ============================================
# DEVELOPMENT SETTINGS
# ============================================
ENVIRONMENT=development             # development, staging, production
DEBUG_MODE=true                     # Enable debug features
RELOAD_ON_CHANGE=true              # Auto-reload on code changes

# Testing
ENABLE_TEST_ENDPOINTS=true          # Enable /test/* endpoints
MOCK_EMBEDDINGS=false              # Use mock embeddings (for testing)